'use strict';var akra;
(function(e){var e=e.util||(e.util={}),a=function(d,b,a){"undefined"===typeof d&&(d=400);"undefined"===typeof b&&(b=150);"undefined"===typeof a&&(a=18);this.step=5;this.counterclockwise=!1;this.radius=0;this.thickness=12;this.total=[10,5,3];this.border=2;this.lineWidth=4;this.indent=2;this.color="#000000";this.element=this.depth=0;this.fontColor="black";this.fontSize=30;this.size=0;this._iLastIntervalId=null;var c=document.createElement("canvas");this.fontSize=a;this.size=Math.min(d,b);c.width=d;
c.height=b;this.canvas=c;this.context=c.getContext("2d");this.radius=this.size/2-this.fontSize};Object.defineProperty(a.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0});a.prototype.loaded=function(){this.element<this.total[this.depth]&&(this.draw(),this.element++)};a.prototype.next=function(){this.depth<this.total.length&&(this.element=0,
this.depth++)};a.prototype.reset=function(){this.element=this.depth=0;this.context.clearRect(0,0,this.width,this.height)};a.prototype.draw=function(){this.loadLevel()};a.prototype.cancel=function(){clearInterval(this._iLastIntervalId)};a.prototype.drawText=function(d){null!==this._iLastIntervalId&&clearInterval(this._iLastIntervalId);var b=0,a=this;this._iLastIntervalId=setInterval(function(){var c="";0===b%3?c=".  ":1===b%3?c=".. ":2===b%3&&(c="...");b++;a.printText(d+c)},333);var c="";0===b%3?c=
".  ":1===b%3?c=".. ":2===b%3&&(c="...");b++;a.printText(d+c)};a.prototype.printText=function(a){var b=this.context,f=this.width/2,c=this.height-2;b.clearRect(0,c-this.fontSize,this.width,this.height);b.textBaseline="bottom";b.fillStyle=this.fontColor;b.textAlign="center";b.font=" "+this.fontSize+"px Tahoma";b.fillText(a,f,c)};a.prototype.updateInfo=function(){for(var a=this.context,b=this.size,f=this.size-this.fontSize-2,c=0,g=0,h=0;h<this.total.length;++h)h<this.depth&&(g+=this.total[h]),c+=this.total[h];
g+=this.element;a.clearRect(b,0,this.width,this.height);a.fillStyle=this.fontColor;a.font="bold "+this.fontSize+"px Consolas";a.fillText((100*(g/c)).toFixed(1)+"%",b,f)};a.prototype.loadLevel=function(a,b){"undefined"===typeof a&&(a=this.element);"undefined"===typeof b&&(b=this.depth);this.animate(360/this.total[b]*a+this.border/2,360/this.total[b]*(a+1)-this.border/2,b)};a.prototype.animate=function(d,b,f){"undefined"===typeof d&&(d=0);"undefined"===typeof b&&(b=360);"undefined"===typeof f&&(f=0);
var c=this,g=this.width/2,h=this.radius+this.lineWidth,i=this.context,e=d,j=a.RADIAN_RATIO,k=setInterval(function(){var a=e+c.step;i.beginPath();i.arc(g,h,Math.max(0,c.radius-f*(c.lineWidth+c.indent)),e*j,a*j,c.counterclockwise);i.lineWidth=c.lineWidth;i.lineCap="butt";i.strokeStyle=c.color;i.stroke();e=a;e>=b&&clearInterval(k)},5)};a.RADIAN_RATIO=Math.PI/180;a.prototype.valueOf=function(){return this.canvas};e.Progress=a})(akra||(akra={}));
