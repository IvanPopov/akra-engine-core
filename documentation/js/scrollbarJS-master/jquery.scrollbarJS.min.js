/*
*
* scrollbarJS 1.0.0
* Copyright 2012, Egor Skorobogatov
* egor.skorobogatov@gmail.com
*
* Released under the MIT.
*
* Change of standart scrollbar in html elements in browser.
*
*/
(function(e){var l=e(document);e.scrollbar=function(n){function m(g,a){var f=g.height(),b=a.height(),e=f-0.02*f,i=b-f,j=e-2*c.btnsWidth,d=Math.floor(j*(i/b));return{scrollpane_h:f,scrollcontent_h:b,scrollcontent_stop:f-b,scrollbar_wrap_h:e,size_slider:e-2*c.btnsWidth-d-2*c.bordersWidth,multiple:b/j,stopScroll:d,percentContent:i/100,percentSlider:d/100}}function k(g){var a=this,f;this.scrollpane=g.scrollpane;this.scrollcontent=g.scrollcontent;this.params=m(this.scrollpane,this.scrollcontent);this.scroll_top= e("<div>").addClass("w-srcoll-top w-srcoll-btn").css({width:c.btnsWidth+"px",height:c.btnsWidth+"px",backgroundPosition:+(c.btnsWidth-14)/2+"px "+(c.btnsWidth-14)/2+"px "});this.scroll_bottom=e("<div>").addClass("w-srcoll-bottom w-srcoll-btn").css({width:c.btnsWidth+"px",height:c.btnsWidth+"px",backgroundPosition:(c.btnsWidth-14)/2+"px 112%"});this.scrollbar_wrap=e("<div>").addClass("w-srcollbar-wrap").css({height:this.params.scrollbar_wrap_h,width:c.btnsWidth});this.scrollbar=e("<div>").addClass("w-srcollbar").css({position:"relative", height:this.params.scrollbar_wrap_h-2*c.btnsWidth,top:c.btnsWidth+"px",width:c.btnsWidth+"px"});this.slider=e("<div>").addClass("w-slider").css({top:0,width:c.btnsWidth-2+"px",height:this.params.size_slider+"px"}).append("<span style='margin:"+this.params.size_slider/2+"px auto;'></span>");this.scrollbar_wrap.append(this.scroll_top);this.scrollbar_wrap.append(this.scrollbar);this.scrollbar_wrap.append(this.scroll_bottom);this.scrollbar.append(this.slider);this.scrollbar_wrap.appendTo(this.scrollpane); var b=function(d){d.preventDefault();if(1>i+d.clientY-j)return a.slider.css({top:0}),a.scrollcontent.css({"margin-top":0}),!1;if(i+d.clientY-j>a.params.stopScroll-1)return a.slider.css({top:a.params.stopScroll}),a.scrollcontent.css({"margin-top":a.params.scrollcontent_stop+"px"}),!1;a.slider.css({top:i+d.clientY-j+"px"});a.scrollcontent.css({"margin-top":a.params.multiple*-1*(i+d.clientY-j)+"px"})},k=function(){l.unbind("mousemove",b)},i,j;a.slider.mousedown(function(d){d.preventDefault();l.bind("mousemove", b);l.one("mouseup",k);i=parseInt(a.slider.css("top"),10);j=d.clientY});this.scrollbar_wrap.click(function(a){a.stopPropagation()});this.scroll_top.add(this.scroll_bottom).bind({mousedown:function(d){var b,c;d.target==a.scroll_top[0]?(b=-1,c=0):(b=1,c=a.params.stopScroll);f=setInterval(function(){var d=parseInt(a.slider.css("top"),10);d==c?(clearInterval(f),a.slider.css("top",c+"px")):(a.slider.css("top",d+b+"px"),a.scrollcontent.css("margin-top",-1*a.params.multiple*(d+b)+"px"))},4)},mouseup:function(){clearInterval(f)}}); this.scrollbar.bind("click",function(d){if(d.target!=a.scrollbar[0])return!1;var d=d.pageY,b=a.slider.offset().top,c=parseInt(a.scrollcontent.css("margin-top"),10),e,g=0,h;d<b?(e=d-b,h=-1*Math.round(2*(a.params.scrollcontent_h/a.params.scrollpane_h))):(e=d-b-a.params.size_slider,h=1*Math.round(2*(a.params.scrollcontent_h/a.params.scrollpane_h)));f=setInterval(function(){if(g+h>=e&&0<h||g+h<=e&&0>h)return clearInterval(f),a.slider.offset({top:b+e}),a.scrollcontent.css("margin-top",c-a.params.multiple* e+"px"),!1;a.slider.offset({top:a.slider.offset().top+h});a.scrollcontent.css("margin-top",parseInt(a.scrollcontent.css("margin-top"),10)-h*a.params.multiple+"px");g+=h},1)})}var c={btnsWidth:16,btnsHeight:16,bordersWidth:1};k.prototype.move=function(c,a){var e,b=this.params;e=c<b.scrollpane_h-b.scrollcontent_h?b.scrollpane_h-b.scrollcontent_h:c;b=Math.abs(e)/b.percentContent*b.percentSlider;this.slider.css("top",b+"px");void 0==a?this.scrollcontent.animate({"margin-top":e+"px"},800):this.scrollcontent.css({"margin-top":!0=== a?c:e+"px"})};k.prototype.show=function(){this.scrollbar_wrap.css("display","block")};k.prototype.hide=function(){this.scrollbar_wrap.css("display","none")};k.prototype.renew=function(){m(this.scrollpane,this.scrollcontent,this.slider)};return new k(n)}})(window.jQuery);
